{"version":3,"sources":["file:///Users/chicmic/Documents/InhouseCOCOS/ZipExtractor/node_modules/jszip/lib/object.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","_req2","_req3","_req4","_req5","_req6","_req7","_req8","url","define","exports","require","module","__filename","__dirname","utf8","utils","GenericWorker","StreamHelper","defaults","CompressedObject","ZipObject","generate","nodejsUtils","NodejsStreamInputAdapter","fileAdd","name","data","originalOptions","dataType","getTypeOf","parent","o","extend","date","Date","compression","toUpperCase","unixPermissions","parseInt","dir","dosPermissions","forceTrailingSlash","createFolders","parentFolder","folderAdd","call","isUnicodeString","binary","base64","isCompressedEmpty","uncompressedSize","length","zipObjectContent","isNode","isStream","prepareContent","optimizedBinaryString","object","files","path","slice","substring","lastSlash","lastIndexOf","isRegExp","Object","prototype","toString","out","load","Error","forEach","cb","filename","relativePath","file","root","filter","search","result","entry","push","arguments","regexp","test","obj","folder","arg","newFolder","ret","clone","remove","kids","i","generateInternalStream","options","worker","opts","streamFiles","compressionOptions","type","platform","comment","mimeType","encodeFileName","utf8encode","toLowerCase","checkSupport","generateWorker","e","error","generateAsync","onUpdate","accumulate","generateNodeStream","toNodejsStream","_cjsExports"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from './utf8';\nimport { __cjsMetaURL as _req0} from './utils';\nimport { __cjsMetaURL as _req1} from './stream/GenericWorker';\nimport { __cjsMetaURL as _req2} from './stream/StreamHelper';\nimport { __cjsMetaURL as _req3} from './defaults';\nimport { __cjsMetaURL as _req4} from './compressedObject';\nimport { __cjsMetaURL as _req5} from './zipObject';\nimport { __cjsMetaURL as _req6} from './generate';\nimport { __cjsMetaURL as _req7} from './nodejsUtils';\nimport { __cjsMetaURL as _req8} from './nodejs/NodejsStreamInputAdapter';\nlet _cjsExports;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n \"use strict\";\n var utf8 = require(\"./utf8\");\n var utils = require(\"./utils\");\n var GenericWorker = require(\"./stream/GenericWorker\");\n var StreamHelper = require(\"./stream/StreamHelper\");\n var defaults = require(\"./defaults\");\n var CompressedObject = require(\"./compressedObject\");\n var ZipObject = require(\"./zipObject\");\n var generate = require(\"./generate\");\n var nodejsUtils = require(\"./nodejsUtils\");\n var NodejsStreamInputAdapter = require(\"./nodejs/NodejsStreamInputAdapter\");\n\n\n /**\n  * Add a file in the current folder.\n  * @private\n  * @param {string} name the name of the file\n  * @param {String|ArrayBuffer|Uint8Array|Buffer} data the data of the file\n  * @param {Object} originalOptions the options of the file\n  * @return {Object} the new file.\n  */\n var fileAdd = function(name, data, originalOptions) {\n     // be sure sub folders exist\n     var dataType = utils.getTypeOf(data),\n         parent;\n\n\n     /*\n      * Correct options.\n      */\n\n     var o = utils.extend(originalOptions || {}, defaults);\n     o.date = o.date || new Date();\n     if (o.compression !== null) {\n         o.compression = o.compression.toUpperCase();\n     }\n\n     if (typeof o.unixPermissions === \"string\") {\n         o.unixPermissions = parseInt(o.unixPermissions, 8);\n     }\n\n     // UNX_IFDIR  0040000 see zipinfo.c\n     if (o.unixPermissions && (o.unixPermissions & 0x4000)) {\n         o.dir = true;\n     }\n     // Bit 4    Directory\n     if (o.dosPermissions && (o.dosPermissions & 0x0010)) {\n         o.dir = true;\n     }\n\n     if (o.dir) {\n         name = forceTrailingSlash(name);\n     }\n     if (o.createFolders && (parent = parentFolder(name))) {\n         folderAdd.call(this, parent, true);\n     }\n\n     var isUnicodeString = dataType === \"string\" && o.binary === false && o.base64 === false;\n     if (!originalOptions || typeof originalOptions.binary === \"undefined\") {\n         o.binary = !isUnicodeString;\n     }\n\n\n     var isCompressedEmpty = (data instanceof CompressedObject) && data.uncompressedSize === 0;\n\n     if (isCompressedEmpty || o.dir || !data || data.length === 0) {\n         o.base64 = false;\n         o.binary = true;\n         data = \"\";\n         o.compression = \"STORE\";\n         dataType = \"string\";\n     }\n\n     /*\n      * Convert content to fit.\n      */\n\n     var zipObjectContent = null;\n     if (data instanceof CompressedObject || data instanceof GenericWorker) {\n         zipObjectContent = data;\n     } else if (nodejsUtils.isNode && nodejsUtils.isStream(data)) {\n         zipObjectContent = new NodejsStreamInputAdapter(name, data);\n     } else {\n         zipObjectContent = utils.prepareContent(name, data, o.binary, o.optimizedBinaryString, o.base64);\n     }\n\n     var object = new ZipObject(name, zipObjectContent, o);\n     this.files[name] = object;\n     /*\n     TODO: we can't throw an exception because we have async promises\n     (we can have a promise of a Date() for example) but returning a\n     promise is useless because file(name, data) returns the JSZip\n     object for chaining. Should we break that to allow the user\n     to catch the error ?\n\n     return external.Promise.resolve(zipObjectContent)\n     .then(function () {\n         return object;\n     });\n     */\n };\n\n /**\n  * Find the parent folder of the path.\n  * @private\n  * @param {string} path the path to use\n  * @return {string} the parent folder, or \"\"\n  */\n var parentFolder = function (path) {\n     if (path.slice(-1) === \"/\") {\n         path = path.substring(0, path.length - 1);\n     }\n     var lastSlash = path.lastIndexOf(\"/\");\n     return (lastSlash > 0) ? path.substring(0, lastSlash) : \"\";\n };\n\n /**\n  * Returns the path with a slash at the end.\n  * @private\n  * @param {String} path the path to check.\n  * @return {String} the path with a trailing slash.\n  */\n var forceTrailingSlash = function(path) {\n     // Check the name ends with a /\n     if (path.slice(-1) !== \"/\") {\n         path += \"/\"; // IE doesn't like substr(-1)\n     }\n     return path;\n };\n\n /**\n  * Add a (sub) folder in the current folder.\n  * @private\n  * @param {string} name the folder's name\n  * @param {boolean=} [createFolders] If true, automatically create sub\n  *  folders. Defaults to false.\n  * @return {Object} the new folder.\n  */\n var folderAdd = function(name, createFolders) {\n     createFolders = (typeof createFolders !== \"undefined\") ? createFolders : defaults.createFolders;\n\n     name = forceTrailingSlash(name);\n\n     // Does this folder already exist?\n     if (!this.files[name]) {\n         fileAdd.call(this, name, null, {\n             dir: true,\n             createFolders: createFolders\n         });\n     }\n     return this.files[name];\n };\n\n /**\n * Cross-window, cross-Node-context regular expression detection\n * @param  {Object}  object Anything\n * @return {Boolean}        true if the object is a regular expression,\n * false otherwise\n */\n function isRegExp(object) {\n     return Object.prototype.toString.call(object) === \"[object RegExp]\";\n }\n\n // return the actual prototype of JSZip\n var out = {\n     /**\n      * @see loadAsync\n      */\n     load: function() {\n         throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\");\n     },\n\n\n     /**\n      * Call a callback function for each entry at this folder level.\n      * @param {Function} cb the callback function:\n      * function (relativePath, file) {...}\n      * It takes 2 arguments : the relative path and the file.\n      */\n     forEach: function(cb) {\n         var filename, relativePath, file;\n         // ignore warning about unwanted properties because this.files is a null prototype object\n         /* eslint-disable-next-line guard-for-in */\n         for (filename in this.files) {\n             file = this.files[filename];\n             relativePath = filename.slice(this.root.length, filename.length);\n             if (relativePath && filename.slice(0, this.root.length) === this.root) { // the file is in the current root\n                 cb(relativePath, file); // TODO reverse the parameters ? need to be clean AND consistent with the filter search fn...\n             }\n         }\n     },\n\n     /**\n      * Filter nested files/folders with the specified function.\n      * @param {Function} search the predicate to use :\n      * function (relativePath, file) {...}\n      * It takes 2 arguments : the relative path and the file.\n      * @return {Array} An array of matching elements.\n      */\n     filter: function(search) {\n         var result = [];\n         this.forEach(function (relativePath, entry) {\n             if (search(relativePath, entry)) { // the file matches the function\n                 result.push(entry);\n             }\n\n         });\n         return result;\n     },\n\n     /**\n      * Add a file to the zip file, or search a file.\n      * @param   {string|RegExp} name The name of the file to add (if data is defined),\n      * the name of the file to find (if no data) or a regex to match files.\n      * @param   {String|ArrayBuffer|Uint8Array|Buffer} data  The file data, either raw or base64 encoded\n      * @param   {Object} o     File options\n      * @return  {JSZip|Object|Array} this JSZip object (when adding a file),\n      * a file (when searching by string) or an array of files (when searching by regex).\n      */\n     file: function(name, data, o) {\n         if (arguments.length === 1) {\n             if (isRegExp(name)) {\n                 var regexp = name;\n                 return this.filter(function(relativePath, file) {\n                     return !file.dir && regexp.test(relativePath);\n                 });\n             }\n             else { // text\n                 var obj = this.files[this.root + name];\n                 if (obj && !obj.dir) {\n                     return obj;\n                 } else {\n                     return null;\n                 }\n             }\n         }\n         else { // more than one argument : we have data !\n             name = this.root + name;\n             fileAdd.call(this, name, data, o);\n         }\n         return this;\n     },\n\n     /**\n      * Add a directory to the zip file, or search.\n      * @param   {String|RegExp} arg The name of the directory to add, or a regex to search folders.\n      * @return  {JSZip} an object with the new directory as the root, or an array containing matching folders.\n      */\n     folder: function(arg) {\n         if (!arg) {\n             return this;\n         }\n\n         if (isRegExp(arg)) {\n             return this.filter(function(relativePath, file) {\n                 return file.dir && arg.test(relativePath);\n             });\n         }\n\n         // else, name is a new folder\n         var name = this.root + arg;\n         var newFolder = folderAdd.call(this, name);\n\n         // Allow chaining by returning a new object with this folder as the root\n         var ret = this.clone();\n         ret.root = newFolder.name;\n         return ret;\n     },\n\n     /**\n      * Delete a file, or a directory and all sub-files, from the zip\n      * @param {string} name the name of the file to delete\n      * @return {JSZip} this JSZip object\n      */\n     remove: function(name) {\n         name = this.root + name;\n         var file = this.files[name];\n         if (!file) {\n             // Look for any folders\n             if (name.slice(-1) !== \"/\") {\n                 name += \"/\";\n             }\n             file = this.files[name];\n         }\n\n         if (file && !file.dir) {\n             // file\n             delete this.files[name];\n         } else {\n             // maybe a folder, delete recursively\n             var kids = this.filter(function(relativePath, file) {\n                 return file.name.slice(0, name.length) === name;\n             });\n             for (var i = 0; i < kids.length; i++) {\n                 delete this.files[kids[i].name];\n             }\n         }\n\n         return this;\n     },\n\n     /**\n      * @deprecated This method has been removed in JSZip 3.0, please check the upgrade guide.\n      */\n     generate: function() {\n         throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\");\n     },\n\n     /**\n      * Generate the complete zip file as an internal stream.\n      * @param {Object} options the options to generate the zip file :\n      * - compression, \"STORE\" by default.\n      * - type, \"base64\" by default. Values are : string, base64, uint8array, arraybuffer, blob.\n      * @return {StreamHelper} the streamed zip file.\n      */\n     generateInternalStream: function(options) {\n         var worker, opts = {};\n         try {\n             opts = utils.extend(options || {}, {\n                 streamFiles: false,\n                 compression: \"STORE\",\n                 compressionOptions : null,\n                 type: \"\",\n                 platform: \"DOS\",\n                 comment: null,\n                 mimeType: \"application/zip\",\n                 encodeFileName: utf8.utf8encode\n             });\n\n             opts.type = opts.type.toLowerCase();\n             opts.compression = opts.compression.toUpperCase();\n\n             // \"binarystring\" is preferred but the internals use \"string\".\n             if(opts.type === \"binarystring\") {\n                 opts.type = \"string\";\n             }\n\n             if (!opts.type) {\n                 throw new Error(\"No output type specified.\");\n             }\n\n             utils.checkSupport(opts.type);\n\n             // accept nodejs `process.platform`\n             if(\n                 opts.platform === \"darwin\" ||\n                 opts.platform === \"freebsd\" ||\n                 opts.platform === \"linux\" ||\n                 opts.platform === \"sunos\"\n             ) {\n                 opts.platform = \"UNIX\";\n             }\n             if (opts.platform === \"win32\") {\n                 opts.platform = \"DOS\";\n             }\n\n             var comment = opts.comment || this.comment || \"\";\n             worker = generate.generateWorker(this, opts, comment);\n         } catch (e) {\n             worker = new GenericWorker(\"error\");\n             worker.error(e);\n         }\n         return new StreamHelper(worker, opts.type || \"string\", opts.mimeType);\n     },\n     /**\n      * Generate the complete zip file asynchronously.\n      * @see generateInternalStream\n      */\n     generateAsync: function(options, onUpdate) {\n         return this.generateInternalStream(options).accumulate(onUpdate);\n     },\n     /**\n      * Generate the complete zip file asynchronously.\n      * @see generateInternalStream\n      */\n     generateNodeStream: function(options, onUpdate) {\n         options = options || {};\n         if (!options.type) {\n             options.type = \"nodebuffer\";\n         }\n         return this.generateInternalStream(options).toNodejsStream(onUpdate);\n     }\n };\n module.exports = out;\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n\n\n}, () => ({\n  './utf8': _req,\n  './utils': _req0,\n  './stream/GenericWorker': _req1,\n  './stream/StreamHelper': _req2,\n  './defaults': _req3,\n  './compressedObject': _req4,\n  './zipObject': _req5,\n  './generate': _req6,\n  './nodejsUtils': _req7,\n  './nodejs/NodejsStreamInputAdapter': _req8,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}